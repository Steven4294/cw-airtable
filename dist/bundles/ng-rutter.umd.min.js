!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("scriptjs"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-rutter",["exports","@angular/core","scriptjs","rxjs","@angular/common"],t):t(e["ng-rutter"]={},e.ng.core,null,e.rxjs,e.ng.common)}(this,function(e,n,o,r,i){"use strict";var u="SUCCESS",c="LOAD",s="EXIT",a=function(){function e(){this.PUBLIC_API_KEY=""}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=n.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),p=function(){function e(e){var t=this;this.url="https://unpkg.com/@rutter/rutter-link@latest",this.options=e,this.observable=r.Observable.create(function(e){t.observer=e})}return e.prototype.open=function(){this.loadRutter(function(){},function(){},function(){})},e.prototype.loadRutter=function(t,e,n){var o=this;Rutter.create({publicKey:this.options.PUBLIC_API_KEY,onSuccess:function(e){console.log("inner success "+o.observer),o.observer.next({name:u,data:{token:e}}),t(e)},onLoad:function(){o.observer.next({name:c}),e()},onExit:function(){o.observer.next({name:s}),n()}}).open()},e.prototype.setup=function(){var n=this;return new Promise(function(e,t){o.get(n.url,function(){e()})})},e.prototype.destroy=function(e){e.unsubscribe()},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:a}]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e(n.inject(a))},token:e,providedIn:"root"}),e}(),l=function(){function e(e){this.rutterService=e,this.text="Log in",this.backgroundColor="#000",this.color="#FFF",this.onSuccess=new n.EventEmitter,this.onLoad=new n.EventEmitter,this.onExit=new n.EventEmitter}return e.prototype.load=function(){var t=this;this.rutterService.loadRutter(function(e){t.onSuccess.emit(e)},function(){t.onLoad.emit()},function(){t.onExit.emit()})},e.prototype.ngOnInit=function(){this.rutterService.setup()},e.decorators=[{type:n.Component,args:[{selector:"ng-rutter",template:'<div class="btn" (click)="load()" \n[style.background-color]="backgroundColor"\n[style.color]="color"\n\n> {{ text }} </div>',styles:[".btn{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;position:relative;color:#fff;background-color:#007bff;font-family:Lato,sans-serif!important;cursor:pointer}"]}]}],e.ctorParameters=function(){return[{type:p}]},e.propDecorators={text:[{type:n.Input}],backgroundColor:[{type:n.Input}],color:[{type:n.Input}],onSuccess:[{type:n.Output}],onLoad:[{type:n.Output}],onExit:[{type:n.Output}]},e}(),t=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:f,useValue:e},{provide:a,useFactory:d,deps:[f]}]}},t.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule],providers:[p],declarations:[l],exports:[l]}]}],t}(),f=new n.InjectionToken("forRoot() MyService configuration.");function d(e){var t=new a;return e&&"string"==typeof e.PUBLIC_API_KEY&&(t.PUBLIC_API_KEY=e.PUBLIC_API_KEY),t}e.NgRutterModule=t,e.FOR_ROOT_OPTIONS_TOKEN=f,e.provideMyServiceOptions=d,e.ɵc=l,e.ɵb=p,e.ɵa=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-rutter.umd.min.js.map