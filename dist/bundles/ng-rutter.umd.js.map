{"version":3,"file":"ng-rutter.umd.js.map","sources":["ng://ng-rutter/src/app/modules/ng-rutter/ng-rutter.service.ts","ng://ng-rutter/src/app/modules/ng-rutter/ng-rutter.component.ts","ng://ng-rutter/src/app/modules/ng-rutter/ng-rutter.module.ts"],"sourcesContent":["// Import the core angular services.\nimport { Injectable } from \"@angular/core\";\nimport { get } from 'scriptjs';\nimport { Observer, Observable, Subscription, of } from \"rxjs\";\nimport { filter, share } from 'rxjs/operators'\n\ndeclare var Rutter: any;\n\nexport interface NgRutterEvent {\n\tname: string\n\tdata?: any\n}\n\nexport enum NgRutterEventType {\n\tSUCCESS = 'SUCCESS',\n\tLOAD = 'LOAD',\n\tEXIT = 'EXIT',\n}\n\n@Injectable({\n\tprovidedIn: \"root\"\n})\nexport class NgRutterServiceOptions {\n\tpublic PUBLIC_API_KEY: string = '';\n}\n\n@Injectable({\n\tprovidedIn: \"root\"\n})\nexport class NgRutterService {\n \n\tpublic options: NgRutterServiceOptions;\n\tpublic observable: Observable<NgRutterEvent>;\n\tpublic observer: Observer<any>\n\turl = 'https://unpkg.com/@rutter/rutter-link@latest';\n\n\topen() {\n\t\tthis.loadRutter(() => {}, () => {}, () => {})\n\t}\n\n\tloadRutter(onSuccess, onLoad, onExit) {\n\n\t\tvar rutterInstance = Rutter.create({\n\t\t\tpublicKey: this.options.PUBLIC_API_KEY,\n\t\t\tonSuccess: (publicToken) => {\n\t\t\t\tconsole.log(`inner success ${this.observer}`)\n\n\t\t\t\tthis.observer.next({\n\n\t\t\t\t\tname: NgRutterEventType.SUCCESS,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttoken: publicToken\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tonSuccess(publicToken)\n\t\t\t},\n\t\t\tonLoad: () => {\n\t\t\t\tthis.observer.next({\n\t\t\t\t\tname: NgRutterEventType.LOAD\n\t\t\t\t})\n\t\t\t\tonLoad()\n\t\t\t},\n\t\t\tonExit: () => {\n\t\t\t\tthis.observer.next({\n\t\t\t\t\tname: NgRutterEventType.EXIT\n\t\t\t\t})\n\t\t\t\tonExit()\n\t\t\t},\n\t\t})\n\t\t\t\n\t\trutterInstance.open();\n\t}\n\n\tsetup() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tget(this.url, () => {\n\t\t\t\tresolve()\n\t\t\t});\n\t\t})\n\t}\n\n\tconstructor( options: NgRutterServiceOptions ) {\n\t\tthis.options = options;\n\t\tthis.observable = Observable.create((observer: Observer<any>) => {\n\t\t\tthis.observer = observer\n\t\t})\n\t}\n\n\tdestroy(subscriber: Subscription) {\n\t\tsubscriber.unsubscribe();\n\t}\n}","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\nimport { NgRutterService } from './ng-rutter.service';\n\n@Component({\n  selector: 'ng-rutter',\n  template: `<div class=\"btn\" (click)=\"load()\" \n[style.background-color]=\"backgroundColor\"\n[style.color]=\"color\"\n\n> {{ text }} </div>`,\n  styles: [`.btn{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;position:relative;color:#fff;background-color:#007bff;font-family:Lato,sans-serif!important;cursor:pointer}`]\n})\n\nexport class NgRutterComponent implements OnInit {\n  @Input() text = 'Log in';\n  @Input() backgroundColor = '#000';\n  @Input() color = '#FFF';\n\n  @Output() onSuccess = new EventEmitter<string>();\n  @Output() onLoad = new EventEmitter();\n  @Output() onExit = new EventEmitter();\n\n  load() {\n    this.rutterService.loadRutter((publicToken) => {\n      this.onSuccess.emit(publicToken)\n    }, () => {\n      this.onLoad.emit()\n    }, () => {\n      this.onExit.emit()\n    });\n  }\n  \n  ngOnInit() {\n    this.rutterService.setup()\n  }\n\n  constructor(private rutterService: NgRutterService) {}\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgRutterComponent } from './ng-rutter.component';\nimport { InjectionToken } from \"@angular/core\";\nimport { NgRutterServiceOptions, NgRutterService } from './ng-rutter.service';\n\n\n@NgModule({\n  \timports: [\n    \tCommonModule\n  \t],\n  \tproviders: [\n\t\tNgRutterService\n\t],\n\tdeclarations: [\n\t\tNgRutterComponent\n\t],\n\texports: [\n\t\tNgRutterComponent,\n\t]\n})\nexport class NgRutterModule {\n\n  static forRoot( options?: ModuleOptions ) : ModuleWithProviders {\n \n\t\treturn({\n\t\t\tngModule: NgRutterModule,\n\t\t\tproviders: [\n\t\t\t\t{\n\t\t\t\t\tprovide: FOR_ROOT_OPTIONS_TOKEN,\n\t\t\t\t\tuseValue: options\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tprovide: NgRutterServiceOptions,\n\t\t\t\t\tuseFactory: provideMyServiceOptions,\n\t\t\t\t\tdeps: [ FOR_ROOT_OPTIONS_TOKEN ]\n\t\t\t\t},\n\t\t\t\tNgRutterService\n\t\t\t]\n\t\t});\n\t}\n }\n\n\n// I define the shape of the optional configuration data passed to the forRoot() method.\nexport interface ModuleOptions {\n  PUBLIC_API_KEY?: string;\n}\n\nexport var FOR_ROOT_OPTIONS_TOKEN = new InjectionToken<ModuleOptions>( \"forRoot() MyService configuration.\" );\n\nexport function provideMyServiceOptions( options?: ModuleOptions ) : NgRutterServiceOptions {\n \n\tvar serviceOptions = new NgRutterServiceOptions();\n\tif ( options ) {\n \n\t\tif ( typeof( options.PUBLIC_API_KEY ) === \"string\" ) {\n\t\t\tserviceOptions.PUBLIC_API_KEY = options.PUBLIC_API_KEY;\n\t\t}\n\t}\n \n\treturn( serviceOptions );\n}"],"names":["Injectable","Observable","get","EventEmitter","Component","Input","Output","NgModule","CommonModule","InjectionToken"],"mappings":"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"}
